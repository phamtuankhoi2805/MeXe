<!DOCTYPE html>


<html lang="vi" xmlns:th="http://www.thymeleaf.org">


<head>


    <meta charset="UTF-8">


    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>VinFast Vero X - Chi tiết sản phẩm</title>


    <link rel="preconnect" href="https://fonts.googleapis.com">


    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>


    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">


    <link rel="stylesheet" th:href="@{/css/trang-chu.css}" href="/css/trang-chu.css">


    <link rel="stylesheet" th:href="@{/css/chi-tiet-san-pham.css}" href="/css/chi-tiet-san-pham.css">


</head>


<body>


<div th:replace="~{fragments/dieu-huong :: thanhDieuHuong}"></div>





<main class="product-detail-page">


    <section class="vf-container product-hero" data-animate>


        <aside class="product-hero__media">


            <div class="product-hero__badge">Phiên bản 2025</div>


            <img id="productHeroImage" th:src="@{/image/evo200.jpg}" src="/image/evo200.jpg" alt="VinFast Vero X 2025">


            <!-- Hiển thị danh sách màu sắc từ database -->
            <div class="product-hero__gallery color-selector" th:if="${productColors != null and !productColors.empty}">
                <!-- Lặp qua danh sách productColors từ controller -->
                <button th:each="productColor, iterStat : ${productColors}" 
                        class="color-dot" 
                        th:classappend="${iterStat.first} ? 'is-active' : ''"
                        th:data-image="${productColor.product.image != null and !productColor.product.image.isEmpty()} ? @{/image/{img}(img=${productColor.product.image})} : @{/image/evo200.jpg}"
                        th:data-name="${productColor.color.name}"
                        th:data-quantity="${productColor.quantity}"
                        th:data-color-id="${productColor.color.id}"
                        th:style="'--color:' + ${productColor.color.hexCode != null ? productColor.color.hexCode : '#c7d1cf'}"
                        th:aria-label="${productColor.color.name}">
                    <span></span>
                </button>
            </div>
            
            <!-- Hiển thị tên màu và tồn kho -->
            <div class="color-name" th:if="${productColors != null and !productColors.empty}">
                <span id="selectedColorName" th:text="${productColors[0].color.name}">Màu sắc</span>
            </div>
            
            <!-- Hiển thị trạng thái tồn kho -->
            <div class="stock-status" style="margin-top: 12px;">
                <span id="stockLabel" class="badge badge-success" 
                      th:if="${productColors != null and !productColors.empty}"
                      th:data-initial-quantity="${productColors[0].quantity}"
                      th:text="${productColors[0].quantity > 0 ? (productColors[0].quantity < 5 ? 'Sắp hết hàng (Còn ' + productColors[0].quantity + ' xe)' : 'Còn hàng (' + productColors[0].quantity + ' xe)') : 'Hết hàng'}">
                    Còn hàng
                </span>
                <span th:unless="${productColors != null and !productColors.empty}" class="badge badge-danger">Hết hàng</span>
            </div>


        </aside>


        <article class="product-hero__content">


            <p class="breadcrumb">


                <a href="/">Trang chủ</a>


                <span>/</span>


                <a href="#">Xe máy điện</a>


                <span>/</span>


                Vero X 2025


            </p>


            <h1>VinFast Vero X 2025</h1>


            <p class="product-subtitle">Mẫu xe điện cá tính dành cho giới trẻ, thiết kế thời trang, vận hành mạnh mẽ và nhiều công nghệ hỗ trợ thông minh.</p>


            <div class="product-price-block">


                <div>


                    <small>Giá bán lẻ đề xuất</small>


                    <strong>34.900.000 VNĐ</strong>


                </div>


                <div class="price-note">Đã bao gồm VAT, chưa bao gồm pin</div>


            </div>


            <div class="product-highlight-list">


                <div>


                    <span>262 km</span>


                    <small>Quãng đường tối đa</small>


                </div>


                <div>


                    <span>72 km/h</span>


                    <small>Tốc độ tối đa</small>


                </div>


                <div>


                    <span>3.500 W</span>


                    <small>Công suất động cơ</small>


                </div>


            </div>


            <div class="product-cta-group">


                <button class="vf-btn vf-btn--primary">Đặt cọc ngay</button>


                <button class="vf-btn product-cta-secondary">So sánh các phiên bản</button>


            </div>


            <div class="product-meta-grid">


                <div>


                    <h3>Ưu đãi tháng 11</h3>


                    <p>Giảm ngay 2 triệu khi đặt cọc online, tặng kèm 12 tháng bảo hành mở rộng.</p>


                </div>


                <div>


                    <h3>Hỗ trợ trả góp</h3>


                    <p>Lãi suất ưu đãi từ 0,79%/tháng, thanh toán trước chỉ từ 30% giá trị xe.</p>


                </div>


            </div>


        </article>


    </section>





    <section class="vf-container product-specs" data-animate>


        <header class="section-header">


            <small>Thông số kỹ thuật</small>


            <h2>Hiệu suất vượt trội trong từng chi tiết</h2>


            <p>Các thông số nổi bật của VinFast Vero X được tối ưu cho nhu cầu di chuyển hàng ngày lẫn những chuyến đi dài.</p>


        </header>


        <div class="specs-grid">


            <dl>


                <div>


                    <dt>Kích thước tổng thể</dt>


                    <dd>1.908 x 690 x 1.140 mm</dd>


                </div>


                <div>


                    <dt>Khoảng sáng gầm</dt>


                    <dd>150 mm</dd>


                </div>


                <div>


                    <dt>Khối lượng không tải</dt>


                    <dd>99 kg</dd>


                </div>


                <div>


                    <dt>Dung tích cốp</dt>


                    <dd>24 lít</dd>


                </div>


            </dl>


            <dl>


                <div>


                    <dt>Động cơ</dt>


                    <dd>Mid-drive, chuẩn IP67</dd>


                </div>


                <div>


                    <dt>Pin</dt>


                    <dd>LFP 73,4V - 27Ah</dd>


                </div>


                <div>


                    <dt>Sạc nhanh</dt>


                    <dd>80% trong 2 giờ</dd>


                </div>


                <div>


                    <dt>Chế độ lái</dt>


                    <dd>Eco / Normal / Sport</dd>


                </div>


            </dl>


            <dl>


                <div>


                    <dt>Hệ thống phanh</dt>


                    <dd>ABS hai kênh</dd>


                </div>


                <div>


                    <dt>Hệ thống treo</dt>


                    <dd>Phuộc ống lồng & lò xo trụ</dd>


                </div>


                <div>


                    <dt>Bánh xe</dt>


                    <dd>Trước 110/70-12 - Sau 120/70-12</dd>


                </div>


                <div>


                    <dt>Kết nối</dt>


                    <dd>VinFast App, định vị GPS</dd>


                </div>


            </dl>


        </div>


    </section>





    <section class="feature-showcase" data-animate>


        <div class="vf-container feature-cards">


            <article class="feature-card">


                <h3>Bảo vệ toàn diện</h3>


                <p>Hệ thống ABS hai kênh thế hệ mới giúp xe luôn ổn định khi phanh gấp, kết hợp phanh đĩa lớn và lốp bám đường cao.</p>


            </article>


            <article class="feature-card">


                <h3>Kết nối thông minh</h3>


                <p>Quản lý xe dễ dàng qua VinFast App: theo dõi trạng thái pin, định vị, thiết lập vùng an toàn và nhận thông báo tức thì.</p>


            </article>


            <article class="feature-card">


                <h3>Trải nghiệm cao cấp</h3>


                <p>Yên da 2 tầng mềm mại, cụm đèn LED toàn bộ, bảng đồng hồ TFT 5,5 inch sắc nét và cốp chứa đồ rộng 24 lít.</p>


            </article>


        </div>


    </section>





    <section class="vf-container pricing-section" data-animate>


        <header class="section-header">


            <small>Lựa chọn tài chính</small>


            <h2>Tùy chọn mua phù hợp với nhu cầu</h2>


        </header>


        <div class="pricing-grid">


            <article class="pricing-card">


                <h3>Mua đứt</h3>


                <p class="price">34.900.000 VNĐ</p>


                <ul>


                    <li>Thanh toán 1 lần, nhận xe trong 48 giờ</li>


                    <li>Tặng 01 năm bảo dưỡng miễn phí</li>


                    <li>Miễn phí đổi pin tháng đầu</li>


                </ul>


                <button class="vf-btn vf-btn--primary">Đặt mua</button>


            </article>


            <article class="pricing-card pricing-card--highlight">


                <div class="card-ribbon">Khuyên dùng</div>


                <h3>Thuê pin linh hoạt</h3>


                <p class="price">189.000 VNĐ/tháng</p>


                <ul>


                    <li>Không lo chi phí thay pin</li>


                    <li>Đổi pin tại 150.000+ điểm toàn quốc</li>


                    <li>Bảo hành pin trọn đời thuê</li>


                </ul>


                <button class="vf-btn vf-btn--primary">Đăng ký gói thuê</button>


            </article>


            <article class="pricing-card">


                <h3>Trả góp 0%</h3>


                <p class="price">Trả trước từ 10,5 triệu</p>


                <ul>


                    <li>Kỳ hạn 12 - 36 tháng</li>


                    <li>Duyệt hồ sơ online trong 24 giờ</li>


                    <li>Tặng bộ phụ kiện cao cấp</li>


                </ul>


                <button class="vf-btn vf-btn--primary">Tư vấn trả góp</button>


            </article>


        </div>


    </section>





    <section class="product-accordion vf-container" data-animate>


        <div class="accordion">


            <button class="accordion-header" type="button">Thiết kế & ngoại thất</button>


            <div class="accordion-content">


                <p>Vero X sở hữu ngôn ngữ thiết kế lai giữa tay ga đô thị và dòng touring cao cấp, các đường nét sắc sảo, dãy đèn daylight LED hình cánh chim đặc trưng nhà VinFast.</p>


            </div>


        </div>


        <div class="accordion">


            <button class="accordion-header" type="button">Công nghệ & tiện nghi</button>


            <div class="accordion-content">


                <p>Xe hỗ trợ chìa khóa thông minh SmartKey, cảnh báo chống trộm, cập nhật OTA cho hệ thống điều khiển và kết nối Bluetooth với điện thoại.</p>


            </div>


        </div>


        <div class="accordion">


            <button class="accordion-header" type="button">Bảo hành & dịch vụ</button>


            <div class="accordion-content">


                <p>Thời gian bảo hành 3 năm hoặc 30.000 km. Miễn phí cứu hộ 24/7 trong 12 tháng đầu. Dịch vụ chăm sóc lưu động tại 30 tỉnh thành.</p>


            </div>


        </div>


    </section>





    <section class="vf-container consult-section detail-consult" data-animate>


        <div>


            <h2>Đăng ký tư vấn VinFast Vero X</h2>


            <p>Để lại thông tin, chuyên viên của VinFast sẽ liên hệ hỗ trợ bạn lựa chọn phiên bản, gói pin và ưu đãi tốt nhất.</p>


        </div>


        <form>


            <div class="form-grid">


                <label>


                    Họ và tên *


                    <input type="text" placeholder="Nguyễn Văn A">


                </label>


                <label>


                    Số điện thoại *


                    <input type="tel" placeholder="0987 654 321">


                </label>


                <label>


                    Email *


                    <input type="email" placeholder="email@vinfast.vn">


                </label>


                <label>


                    Tỉnh/Thành phố *


                    <select>


                        <option value="">Chọn tỉnh/thành</option>


                        <option>Hà Nội</option>


                        <option>Đà Nẵng</option>


                        <option>TP. Hồ Chí Minh</option>


                        <option>Cần Thơ</option>


                    </select>


                </label>


            </div>


            <label>


                Thời gian dự kiến mua *


                <select>


                    <option value="">Chọn thời gian</option>


                    <option>Trong tháng này</option>


                    <option>1 - 3 tháng tới</option>


                    <option>3 - 6 tháng tới</option>


                    <option>Chưa xác định</option>


                </select>


            </label>


            <label class="checkbox">


                <input type="checkbox" checked>


                Tôi đồng ý cho VinFast liên hệ và tư vấn theo Chính sách Bảo vệ Dữ liệu cá nhân.


            </label>


            <button type="submit" class="vf-btn vf-btn--primary">Đăng ký ngay</button>


        </form>


    </section>
    
    <!-- Phần Đánh giá & Nhận xét -->
    <section class="vf-container reviews-section" data-animate style="margin-top: 60px; padding-top: 40px; border-top: 1px solid #eee;">
        <header class="section-header">
            <div class="header-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <h2>Đánh giá từ khách hàng</h2>
                <div class="rating-overview" th:if="${averageRating != null and reviewCount > 0}">
                    <strong class="rating-score" style="font-size: 2rem; color: #1d1f23;" th:text="${#numbers.formatDecimal(averageRating, 1, 'COMMA', 1, 'POINT')} + '/5'">4.8/5</strong>
                    <div class="stars" style="color: #ffab00; font-size: 1.2rem;">
                        <span th:each="i : ${#numbers.sequence(1, 5)}" 
                              th:text="${i <= averageRating ? '★' : '☆'}">★</span>
                    </div>
                    <span th:text="'(' + ${reviewCount} + ' đánh giá)'">(128 đánh giá)</span>
                </div>
            </div>
        </header>
        
        <!-- Danh sách đánh giá -->
        <div class="reviews-list" th:if="${reviews != null and !reviews.empty}">
            <article th:each="review : ${reviews}" class="review-card" style="background: #fff; padding: 20px; border-radius: 16px; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
                <div class="review-header" style="display: flex; gap: 12px; align-items: center; margin-bottom: 12px;">
                    <img th:src="@{'https://ui-avatars.com/api/?name=' + ${review.user.fullName} + '&size=40&background=0048ff&color=fff'}" 
                         alt="Avatar" 
                         class="review-avatar" 
                         style="width: 40px; height: 40px; border-radius: 50%;">
                    <div>
                        <strong th:text="${review.user.fullName}">Tên khách hàng</strong>
                        <div class="stars" style="color: #ffab00; font-size: 0.9rem;">
                            <span th:each="i : ${#numbers.sequence(1, 5)}" 
                                  th:text="${i <= review.rating ? '★' : '☆'}">★</span>
                        </div>
                    </div>
                    <span class="review-date" style="margin-left: auto; color: #888; font-size: 0.85rem;" 
                          th:text="${#temporals.format(review.createdAt, 'dd/MM/yyyy')}">12/11/2024</span>
                </div>
                <p class="review-content" th:if="${review.comment != null and !review.comment.isEmpty()}" th:text="${review.comment}">Nội dung đánh giá</p>
                <div class="review-images" th:if="${review.images != null and !review.images.isEmpty()}">
                    <img th:each="img : ${#strings.arraySplit(review.images, ',')}" 
                         th:src="@{/image/{img}(img=${img.trim()})}" 
                         alt="Ảnh thực tế" 
                         style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px; margin-top: 10px; margin-right: 8px;">
                </div>
            </article>
        </div>
        
        <!-- Thông báo nếu chưa có đánh giá -->
        <div th:if="${reviews == null or reviews.empty}" style="text-align: center; padding: 40px; color: #888;">
            <p>Chưa có đánh giá nào cho sản phẩm này. Hãy là người đầu tiên đánh giá!</p>
        </div>
        
        <!-- Form viết đánh giá -->
        <div class="write-review-box" style="margin-top: 30px; background: #f8f9fa; padding: 24px; border-radius: 16px;">
            <h3>Viết đánh giá của bạn</h3>
            <form action="/api/reviews" method="POST" id="reviewForm">
                <input type="hidden" name="productId" th:value="${product.id}">
                <div class="rating-input" style="margin-bottom: 12px;">
                    <span>Đánh giá: </span>
                    <select name="rating" required style="padding: 8px; border: 1px solid #ddd; border-radius: 8px; margin-left: 8px;">
                        <option value="">Chọn số sao</option>
                        <option value="5">5 Sao (Tuyệt vời)</option>
                        <option value="4">4 Sao (Tốt)</option>
                        <option value="3">3 Sao (Bình thường)</option>
                        <option value="2">2 Sao (Kém)</option>
                        <option value="1">1 Sao (Rất kém)</option>
                    </select>
                </div>
                <textarea name="comment" rows="3" placeholder="Chia sẻ trải nghiệm của bạn về sản phẩm..." 
                          style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin: 12px 0; font-family: inherit;"></textarea>
                <button type="submit" class="vf-btn vf-btn--primary">Gửi đánh giá</button>
            </form>
        </div>
    </section>

</main>





<div th:replace="~{fragments/chan-trang :: chanTrang}"></div>





<script th:src="@{/js/dieu-huong.js}" src="/js/dieu-huong.js"></script>


<script>


    (function () {


        const colorDots = document.querySelectorAll('.color-dot');


        const heroImage = document.getElementById('productHeroImage');


        const colorNameLabel = document.querySelector('.color-name');


        const baseSrc = heroImage.getAttribute('src');





        // Script cập nhật tồn kho khi chọn màu
        const stockLabel = document.getElementById('stockLabel');
        const selectedColorName = document.getElementById('selectedColorName');
        
        colorDots.forEach(dot => {
            dot.addEventListener('click', () => {
                colorDots.forEach(item => item.classList.remove('is-active'));
                dot.classList.add('is-active');
                
                const src = dot.dataset.image || baseSrc;
                const name = dot.dataset.name;
                const quantity = parseInt(dot.dataset.quantity || 0);
                
                heroImage.setAttribute('src', src);
                
                // Cập nhật tên màu
                if (selectedColorName) {
                    selectedColorName.textContent = name;
                }
                
                // Cập nhật trạng thái tồn kho
                if (stockLabel) {
                    if (quantity === 0) {
                        stockLabel.className = 'badge badge-danger';
                        stockLabel.innerText = 'Hết hàng';
                        // Disable nút thêm vào giỏ hàng
                        const addToCartBtn = document.querySelector('.product-cta-group button');
                        if (addToCartBtn) {
                            addToCartBtn.disabled = true;
                            addToCartBtn.style.opacity = '0.5';
                            addToCartBtn.style.cursor = 'not-allowed';
                        }
                    } else if (quantity < 5) {
                        stockLabel.className = 'badge badge-warning';
                        stockLabel.innerText = `Sắp hết hàng (Còn ${quantity} xe)`;
                        // Enable nút thêm vào giỏ hàng
                        const addToCartBtn = document.querySelector('.product-cta-group button');
                        if (addToCartBtn) {
                            addToCartBtn.disabled = false;
                            addToCartBtn.style.opacity = '1';
                            addToCartBtn.style.cursor = 'pointer';
                        }
                    } else {
                        stockLabel.className = 'badge badge-success';
                        stockLabel.innerText = `Còn hàng (${quantity} xe)`;
                        // Enable nút thêm vào giỏ hàng
                        const addToCartBtn = document.querySelector('.product-cta-group button');
                        if (addToCartBtn) {
                            addToCartBtn.disabled = false;
                            addToCartBtn.style.opacity = '1';
                            addToCartBtn.style.cursor = 'pointer';
                        }
                    }
                }
            });
        });





        document.querySelectorAll('.accordion-header').forEach(button => {


            button.addEventListener('click', () => {


                const content = button.nextElementSibling;


                button.classList.toggle('is-open');


                content.style.maxHeight = content.style.maxHeight ? null : content.scrollHeight + 'px';


            });


        });





        const observer = new IntersectionObserver(entries => {


            entries.forEach(entry => {


                if (entry.isIntersecting) {


                    entry.target.classList.add('is-visible');


                }


            });


        }, { threshold: 0.25 });





        document.querySelectorAll('[data-animate]').forEach(el => observer.observe(el));


    })();


</script>


</body>


</html>














